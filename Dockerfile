from ubuntu:20.04

ENV LC_ALL=en_US.UTF-8

RUN useradd -ms /bin/bash -G sudo sigint

ARG DEBIAN_FRONTEND=noninteractive

RUN dpkg --add-architecture i386

RUN apt-get update && apt-get -y install sudo git gdb python3-pip binwalk wget p7zip tmux libc6:i386 libstdc++6:i386 gcc-multilib clang

RUN echo '%sudo ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers

RUN pip3 install pwntools

RUN git clone https://github.com/offensive-security/exploitdb.git /opt/exploit-database && ln -s /opt/exploit-database/searchsploit /usr/local/bin/searchsploit

RUN git clone https://github.com/danielmiessler/SecLists.git /opt/seclists && ln -s /opt/seclists /usr/local/share

RUN cd /opt && wget https://github.com/OJ/gobuster/releases/download/v3.0.1/gobuster-linux-amd64.7z && 7z x gobuster-linux-amd64.7z && chmod -R 755 /opt/gobuster-linux-amd64 && ln -s /opt/gobuster-linux-amd64/gobuster /usr/local/bin

RUN git clone https://github.com/swisskyrepo/PayloadsAllTheThings.git /opt/PayloadsAllTheThings && ln -s /opt/PayloadsAllTheThings /usr/local/share

USER sigint
WORKDIR /home/sigint

RUN git clone https://github.com/pwndbg/pwndbg && cd pwndbg && ./setup.sh

COPY gdbinit .gdbinit
